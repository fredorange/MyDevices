
	Copyright(c) 2011 France Telecom / Orange Labs
	This file is part of MyDevices, a PHA for Indivo X.

                             MyDevices
                    A Continua interface for Indivo X

﻿MyDevices is an Indivo X PHA project that delivers a Continua WAN Interface Receiver Open Source module for Indivo X: It receives securely observations from many Medical Devices (Blood pressure, Weight scale, Thermometer…) and stores them in Indivo using SNOMED CT and UCUM nomenclatures. It will enable end-to-end connected health solutions based on the Continua architecture and Indivo X. 

Please note that, as the project is still ongoing, the application is not yet certified by the Continua Health Alliance, so Continua conformity can’t apply.

France Telecom Orange is a promoter member of the Continua Health Alliance (http://www.continuaalliance.org/about-the-alliance/member-companies.html).

This document describes how to install and configure MyDevices for Indivo X.

Before starting
---------------

MyDevices provides the SOAP Webservice interface to receive and stores obsvervations from HL7 PCD ORU-R01 messages as described in the Continua Design Guidelines 2010. 

Please note:
1) As the project is still ongoing, the application is not yet certified by the Continua Health Alliance, so Continua conformity can’t apply.
2) The trusted service (WS-Security profile) required by the Continua Design Guidelines is not provided in this distribution. You can contact us if you would like more information about it.

If you don't own a Continua WAN Sender (aka Continua AHD), a tool like SOAPui (http://www.soapui.org) will be useful. You will find applications on Android or Windows plateforms to transmit data from Continua Personal Medical Devices. 


1 Initiate your record
-----------------------

Log on Indivo interface and add MyDevices PHA to your record. 

In the MyDevices screen look for the Access key field in the <Continua Gateway configuration / Your AHD keys> frame, that shall look like "e34d615e-23b0-4b03-a300-c754774c60fb":
This access key is the PID (Patient Identifier) that you will register in the sender (Continua AHD).

2 Continua Gateway (sender) configuration
-----------------------------------------

Configure the PID, (Access Key of your Indivo record).

Configure the web service URL (http://your.server:8080/continuaConnector/DeviceObservationConsumer_Service?wsdl).

That's it, you can now 

3 Test samples
---------------

If you want to perform some initial tests with SoapUI, here are some samples of HL7 messages. The message has to be an ORU-R01 Continua message, please look at the Continua Design Guidelines to learn more about the requirements (http://www.continuaalliance.org).

- The access key has to be set into the HL7 message: segment PID, field 3, subfield 1 (replace "patient_pid_here").

Weight Scale:

MSH|^~\$|OrangeSample^ACDE48234567ABCD^EUI-64||||20110818112949+0200||ORU^R01^ORU_R01|MSGID1|P|2.6|||NE|AL|||||IHE PCD ORU-R01 2006^HL7^2.16.840.1.113883.9.n.m^HL7
PID|||patient_pid_here^^^Children's Hospital Boston^PI||Smith^John^^^^^L^A||19700101000000+0100|M
OBR|1|C0001^SOAPui^2011^EUI-64|C0001^SOAPui^2011^EUI-64|182777000^monitoring of patient^SNOMED-CT|||20110818112858+0200|20110818112943+0200
OBX|1|CWE|68220^MDC_TIME_SYNC_PROTOCOL^MDC|0.0.0.1|532224^MDC_TIME_SYNC_NONE^MDC||||||R
OBX|2|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|0.0.0.2|1^auth-body-continua(2)||||||R
OBX|3|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|0.0.0.3|1.5||||||R
OBX|4||528399^MDC_DEV_SPEC_PROFILE_SCALE^MDC|1|||||||X|||||||ID2010-01^EUI-64
OBX|5|ST|531969^MDC_ID_MODEL_NUMBER^MDC|1.0.0.1|Yellow Scale 2010||||||R
OBX|6|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|1.0.0.2|Orange Labs||||||R
OBX|7|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|1.0.0.3|054 6798 2144||||||R
OBX|8|DTM|67975^MDC_ATTR_TIME_ABS^MDC|1.0.0.4|20110801101010||||||R|||20110801101010
OBX|9|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|1.0.0.5|1^auth-body-continua(2)||||||R
OBX|10|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|1.0.0.6|1.5||||||R
OBX|11|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|1.0.0.7|16399||||||R
OBX|12|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|1.0.0.8|0^unregulated-device(0)||||||R
OBX|13|NM|188736^MDC_MASS_BODY_ACTUAL^MDC|1.0.1.1|80|263875^MDC_DIM_KILO_G^MDC|||||R|||20110818112913+0200
OBX|14|NM|188740^MDC_LEN_BODY_ACTUAL^MDC|1.0.1.2|182|263441^MDC_DIM_CENTI_M^MDC|||||R|||20110818112921+0200

MSH|^~\$|OrangeSample^ACDE48234567ABCD^EUI-64||||20110818112949+0200||ORU^R01^ORU_R01|MSGID1|P|2.6|||NE|AL|||||IHE PCD ORU-R01 2006^HL7^2.16.840.1.113883.9.n.m^HL7
PID|||patient_pid_here^^^Children's Hospital Boston^PI||Smith^John^^^^^L^A||19700101000000+0100|M
OBR|1|C0001^SOAPui^2011^EUI-64|C0001^SOAPui^2011^EUI-64|182777000^monitoring of patient^SNOMED-CT|||20110818112858+0200|20110820145700+0200
OBX|1|CWE|68220^MDC_TIME_SYNC_PROTOCOL^MDC|0.0.0.1|532224^MDC_TIME_SYNC_NONE^MDC||||||R
OBX|2|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|0.0.0.2|1^auth-body-continua(2)||||||R
OBX|3|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|0.0.0.3|1.5||||||R
OBX|4||528399^MDC_DEV_SPEC_PROFILE_SCALE^MDC|1|||||||X|||||||ID2010-01^EUI-64
OBX|5|ST|531969^MDC_ID_MODEL_NUMBER^MDC|1.0.0.1|Yellow Scale 2010||||||R
OBX|6|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|1.0.0.2|Orange Labs||||||R
OBX|7|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|1.0.0.3|054 6798 2144||||||R
OBX|8|DTM|67975^MDC_ATTR_TIME_ABS^MDC|1.0.0.4|20110801101010||||||R|||20110801101010
OBX|9|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|1.0.0.5|1^auth-body-continua(2)||||||R
OBX|10|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|1.0.0.6|1.5||||||R
OBX|11|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|1.0.0.7|16399||||||R
OBX|12|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|1.0.0.8|0^unregulated-device(0)||||||R
OBX|13|NM|188736^MDC_MASS_BODY_ACTUAL^MDC|1.0.1.1|80|263875^MDC_DIM_KILO_G^MDC|||||R|||20110818112913+0200
OBX|14|NM|188740^MDC_LEN_BODY_ACTUAL^MDC|1.0.1.2|182|263441^MDC_DIM_CENTI_M^MDC|||||R|||20110818112921+0200
OBX|15||528399^MDC_DEV_SPEC_PROFILE_SCALE^MDC|2|||||||X|||||||ID2010-01^EUI-64
OBX|16|ST|531969^MDC_ID_MODEL_NUMBER^MDC|2.0.0.1|Yellow Scale 2010||||||R
OBX|17|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|2.0.0.2|Orange Labs||||||R
OBX|18|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|2.0.0.3|054 6798 2144||||||R
OBX|19|DTM|67975^MDC_ATTR_TIME_ABS^MDC|2.0.0.4|20110801101010||||||R|||20110801101010
OBX|20|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|2.0.0.5|1^auth-body-continua(2)||||||R
OBX|21|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|2.0.0.6|1.5||||||R
OBX|22|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|2.0.0.7|16399||||||R
OBX|23|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|2.0.0.8|0^unregulated-device(0)||||||R
OBX|24|NM|188736^MDC_MASS_BODY_ACTUAL^MDC|2.0.1.1|79|263875^MDC_DIM_KILO_G^MDC|||||R|||20110819103000+0200
OBX|25|NM|188740^MDC_LEN_BODY_ACTUAL^MDC|2.0.1.2|182|263441^MDC_DIM_CENTI_M^MDC|||||R|||20110819103000+0200
OBX|26||528399^MDC_DEV_SPEC_PROFILE_SCALE^MDC|3|||||||X|||||||ID2010-01^EUI-64
OBX|27|ST|531969^MDC_ID_MODEL_NUMBER^MDC|3.0.0.1|Yellow Scale 2010||||||R
OBX|28|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|3.0.0.2|Orange Labs||||||R
OBX|29|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|3.0.0.3|054 6798 2144||||||R
OBX|30|DTM|67975^MDC_ATTR_TIME_ABS^MDC|3.0.0.4|20110801101010||||||R|||20110801101010
OBX|31|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|3.0.0.5|1^auth-body-continua(2)||||||R
OBX|32|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|3.0.0.6|1.5||||||R
OBX|33|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|3.0.0.7|16399||||||R
OBX|34|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|3.0.0.8|0^unregulated-device(0)||||||R
OBX|35|NM|188736^MDC_MASS_BODY_ACTUAL^MDC|3.0.1.1|81|263875^MDC_DIM_KILO_G^MDC|||||R|||20110820145600+0200
OBX|36|NM|188740^MDC_LEN_BODY_ACTUAL^MDC|3.0.1.2|182|263441^MDC_DIM_CENTI_M^MDC|||||R|||20110820145600+0200


Blood Pressure

MSH|^~\$|OrangeSample^ACDE48234567ABCD^EUI-64||||20110818112949+0200||ORU^R01^ORU_R01|MSGID1|P|2.6|||NE|AL|||||IHE PCD ORU-R01 2006^HL7^2.16.840.1.113883.9.n.m^HL7
PID|||patient_pid_here^^^Children's Hospital Boston^PI||Smith^John^^^^^L^A||19700101000000+0100|M
OBR|1|C0001^SOAPui^2011^EUI-64|C0001^SOAPui^2011^EUI-64|182777000^monitoring of patient^SNOMED-CT|||20110818122858+0200|20110818122943+0200
OBX|1|CWE|68220^MDC_TIME_SYNC_PROTOCOL^MDC|0.0.0.1|532224^MDC_TIME_SYNC_NONE^MDC||||||R
OBX|2|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|0.0.0.2|1^auth-body-continua(2)||||||R
OBX|3|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|0.0.0.3|1.5||||||R
OBX|4||528391^MDC_DEV_SPEC_PROFILE_BP^MDC|1|||||||X|||||||ID2002-12^EUI-64
OBX|5|ST|531969^MDC_ID_MODEL_NUMBER^MDC|1.0.0.1|Green BP 2002||||||R
OBX|6|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|1.0.0.2|Orange Labs||||||R
OBX|7|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|1.0.0.3|T123-01-22||||||R
OBX|8|DTM|67975^MDC_ATTR_TIME_ABS^MDC|1.0.0.4|20110801101010||||||R|||20110801101010
OBX|9|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|1.0.0.5|1^auth-body-continua(2)||||||R
OBX|10|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|1.0.0.6|1.5||||||R
OBX|11|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|1.0.0.7|16391||||||R
OBX|12|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|1.0.0.8|0^unregulated-device(0)||||||R
OBX|13||150020^MDC_PRESS_BLD_NONINV^MDC|1.0.1|||||||X|||20110818122913+0200
OBX|14|NM|150021^MDC_PRESS_BLD_NONINV_SYS^MDC|1.0.1.1|130|266016^MDC_DIM_MMHG^MDC|||||R
OBX|15|NM|150022^MDC_PRESS_BLD_NONINV_DIA^MDC|1.0.1.2|82|266016^MDC_DIM_MMHG^MDC|||||R
OBX|16|NM|150023^MDC_PRESS_BLD_NONINV_MEAN^MDC|1.0.1.3|106|266016^MDC_DIM_MMHG^MDC|||||R
OBX|17|NM|149546^MDC_PULS_RATE_NON_INV^MDC|1.0.0.9|62|264864^MDC_BEAT_PER_MIN^MDC|||||R

Thermometer

MSH|^~\$|OrangeSample^ACDE48234567ABCD^EUI-64||||20110818112949+0200||ORU^R01^ORU_R01|MSGID1|P|2.6|||NE|AL|||||IHE PCD ORU-R01 2006^HL7^2.16.840.1.113883.9.n.m^HL7
PID|||patient_pid_here^^^Children's Hospital Boston^PI||Smith^John^^^^^L^A||19700101000000+0100|M
OBR|1|C0001^SOAPui^2011^EUI-64|C0001^SOAPui^2011^EUI-64|182777000^monitoring of patient^SNOMED-CT|||20110818132858+0200|20110818132943+0200
OBX|1|CWE|68220^MDC_TIME_SYNC_PROTOCOL^MDC|0.0.0.1|532224^MDC_TIME_SYNC_NONE^MDC||||||R
OBX|2|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|0.0.0.2|1^auth-body-continua(2)||||||R
OBX|3|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|0.0.0.3|1.5||||||R
OBX|4||528392^MDC_DEV_SPEC_PROFILE_TEMP^MDC|1|||||||X|||||||ID3001-001^EUI-64
OBX|5|ST|531969^MDC_ID_MODEL_NUMBER^MDC|1.0.0.1|Blue Therm 3001||||||R
OBX|6|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|1.0.0.2|Orange Labs||||||R
OBX|7|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|1.0.0.3|Z00001546||||||R
OBX|8|DTM|67975^MDC_ATTR_TIME_ABS^MDC|1.0.0.4|20100916145110||||||R|||20100916145110+0000
OBX|9|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|1.0.0.5|1^auth-body-continua(2)||||||R
OBX|10|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|1.0.0.6|1.5||||||R
OBX|11|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|1.0.0.7|16392||||||R
OBX|12|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|1.0.0.8|0^unregulated-device(0)||||||R
OBX|13|NM|150364^MDC_TEMP_BODY^MDC|1.0.0.9|37.3|268192^MDC_DIM_DEGC^MDC|||||R|||20110818132913+0200


Multi device.

MSH|^~\$|OrangeSample^ACDE48234567ABCD^EUI-64||||20110818112949+0200||ORU^R01^ORU_R01|MSGID1|P|2.6|||NE|AL|||||IHE PCD ORU-R01 2006^HL7^2.16.840.1.113883.9.n.m^HL7
PID|||patient_pid_here^^^Children's Hospital Boston^PI||Smith^John^^^^^L^A||19700101000000+0100|M
OBR|1|C0001^SOAPui^2011^EUI-64|C0001^SOAPui^2011^EUI-64|182777000^monitoring of patient^SNOMED-CT|||20110818112858+0200|20110818132943+0200
OBX|1|CWE|68220^MDC_TIME_SYNC_PROTOCOL^MDC|0.0.0.1|532224^MDC_TIME_SYNC_NONE^MDC||||||R
OBX|2|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|0.0.0.2|1^auth-body-continua(2)||||||R
OBX|3|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|0.0.0.3|1.5||||||R
OBX|4||528399^MDC_DEV_SPEC_PROFILE_SCALE^MDC|1|||||||X|||||||ID2010-01^EUI-64
OBX|5|ST|531969^MDC_ID_MODEL_NUMBER^MDC|1.0.0.1|Yellow Scale 2010||||||R
OBX|6|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|1.0.0.2|Orange Labs||||||R
OBX|7|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|1.0.0.3|054 6798 2144||||||R
OBX|8|DTM|67975^MDC_ATTR_TIME_ABS^MDC|1.0.0.4|20110801101010||||||R|||20110801101010
OBX|9|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|1.0.0.5|1^auth-body-continua(2)||||||R
OBX|10|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|1.0.0.6|1.5||||||R
OBX|11|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|1.0.0.7|16399||||||R
OBX|12|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|1.0.0.8|0^unregulated-device(0)||||||R
OBX|13|NM|188736^MDC_MASS_BODY_ACTUAL^MDC|1.0.1.1|80|263875^MDC_DIM_KILO_G^MDC|||||R|||20110818112913+0200
OBX|14|NM|188740^MDC_LEN_BODY_ACTUAL^MDC|1.0.1.2|182|263441^MDC_DIM_CENTI_M^MDC|||||R|||20110818112921+0200
OBX|15||528391^MDC_DEV_SPEC_PROFILE_BP^MDC|2|||||||X|||||||ID2002-12^EUI-64
OBX|16|ST|531969^MDC_ID_MODEL_NUMBER^MDC|2.0.0.1|Green BP 2002||||||R
OBX|17|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|2.0.0.2|Orange Labs||||||R
OBX|18|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|2.0.0.3|T123-01-22||||||R
OBX|19|DTM|67975^MDC_ATTR_TIME_ABS^MDC|2.0.0.4|20110801101010||||||R|||20110801101010
OBX|20|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|2.0.0.5|1^auth-body-continua(2)||||||R
OBX|21|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|2.0.0.6|1.5||||||R
OBX|22|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|2.0.0.7|16391||||||R
OBX|23|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|2.0.0.8|0^unregulated-device(0)||||||R
OBX|24||150020^MDC_PRESS_BLD_NONINV^MDC|2.0.1|||||||X|||20110818122913+0200
OBX|25|NM|150021^MDC_PRESS_BLD_NONINV_SYS^MDC|2.0.1.1|130|266016^MDC_DIM_MMHG^MDC|||||R
OBX|26|NM|150022^MDC_PRESS_BLD_NONINV_DIA^MDC|2.0.1.2|82|266016^MDC_DIM_MMHG^MDC|||||R
OBX|27|NM|150023^MDC_PRESS_BLD_NONINV_MEAN^MDC|2.0.1.3|106|266016^MDC_DIM_MMHG^MDC|||||R
OBX|28|NM|149546^MDC_PULS_RATE_NON_INV^MDC|2.0.0.9|62|264864^MDC_BEAT_PER_MIN^MDC|||||R
OBX|29||528392^MDC_DEV_SPEC_PROFILE_TEMP^MDC|3|||||||X|||||||ID3001-001^EUI-64
OBX|30|ST|531969^MDC_ID_MODEL_NUMBER^MDC|3.0.0.1|Blue Therm 3001||||||R
OBX|31|ST|531970^MDC_ID_MODEL_MANUFACTURER^MDC|3.0.0.2|Orange Labs||||||R
OBX|32|ST|531972^MDC_ID_PROD_SPEC_SERIAL^MDC|3.0.0.3|Z00001546||||||R
OBX|33|DTM|67975^MDC_ATTR_TIME_ABS^MDC|3.0.0.4|20100916145110||||||R|||20100916145110+0000
OBX|34|CWE|68218^MDC_REG_CERT_DATA_AUTH_BODY^MDC|3.0.0.5|1^auth-body-continua(2)||||||R
OBX|35|ST|588800^MDC_REG_CERT_DATA_CONTINUA_VERSION^MDC|3.0.0.6|1.5||||||R
OBX|36|NA|588801^MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST^MDC|3.0.0.7|16392||||||R
OBX|37|CWE|588802^MDC_REG_CERT_DATA_CONTINUA_REG_STATUS^MDC|3.0.0.8|0^unregulated-device(0)||||||R
OBX|38|NM|150364^MDC_TEMP_BODY^MDC|3.0.0.9|37.3|268192^MDC_DIM_DEGC^MDC|||||R|||20110818132913+0200





